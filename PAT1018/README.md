# 题解
----
* 这题由于涉及到每个站点车辆收集的问题，因此不能单纯的用Dijkstra算法。
* 由于Dijkstra算法是基于动态规划的算法，那么涉及到车辆数量的变量也应该满足最优子结构的性质，但是以下这个例子却说明这并不满足最优子结构  
![image][tmp]
* 换种思路，利用**Dijkstra+DFS**方法去寻找最优点。
* 利用Dijkstra算法找出从源点到终点的所有最短路径树，再利用DFS算法对这颗树进行递归找出满足题目要求的路径
* 在DFS堆最短路径树进行遍历时，是从终点向源点前进的，那么每个点保持两个变量分别表示从终点到当前车站所需要从PBMC送来的车辆数sent和能被收集走的车辆数collect。从终点向源点遍历过程中，这两个变量满足一下关系：
	* if bikes < Cmax/2  
	*sent-cur* = *sent-pre* + Cmax/2 - bikes  
	*collect-cur* = *collect-cur*
	* if bikes >= Cmax/2
		* if bikes-Cmax/2 > *sent-pre*  
		*sent-cur* = 0  
		*collect-cur* = *collect-pre* + bike - Cmax/2 -*sent-pre*
		* if bikes-Cmax/2 <= *sent-pre*  
		*sent-cur* = *sent-pre* - bikes + Cmax/2  
		*collect-cur* = *collect-pre*
* 最终选择满足题目的最优路径即可
[tmp]:data:image/png;base64,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
